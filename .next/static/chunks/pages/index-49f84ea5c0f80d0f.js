(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(1752)}])},1752:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return u},default:function(){return Home}});var s=r(5893),a=r(7294),n=r(2885),i=r(7353),l=r(3317),o=r(9008),c=r.n(o);let delay=e=>new Promise(t=>setTimeout(t,e));async function withRetry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;try{return await e()}catch(a){if(t<=0)throw a;return console.log("API呼び出しに失敗しました。".concat(r,"ms後にリトライします... (残り ").concat(t," 回)")),await delay(r),withRetry(e,t-1,r*s,s)}}let ApiError=class ApiError extends Error{static async fromResponse(e){let t={},r=e.statusText;try{r=(t=await e.json()).error||t.message||e.statusText}catch(t){try{r=await e.text()}catch(e){}}return new ApiError(e.status,e.statusText,r,t)}constructor(e,t,r,s){super(r),this.name="ApiError",this.status=e,this.statusText=t,this.data=s}};async function fetchWithErrorHandling(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return withRetry(async()=>{let r=await fetch(e,t);if(429===r.status){let e=r.headers.get("Retry-After"),t=e?1e3*parseInt(e,10):6e4;throw console.log("レート制限に達しました。".concat(t,"ms後にリトライします...")),await delay(t),new ApiError(429,"Too Many Requests","レート制限に達しました")}if(!r.ok)throw await ApiError.fromResponse(r);return r},r)}var d=r(9633),m=r(1415);let x=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))});var u=!0;function Home(e){let{novels:t,tags:r,tagCounts:o}=e,[u,h]=(0,a.useState)(t),[g,f]=(0,a.useState)(""),[y,p]=(0,a.useState)(l.k$),[w,b]=(0,a.useState)(null),[j,N]=(0,a.useState)(!1),[v,k]=(0,a.useState)("grid"),[E,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=(0,l.UO)();p(e),e!==l.k$&&fetchNovelsForLanguage(e)},[]);let fetchNovelsForLanguage=async e=>{N(!0);try{let t=await fetchWithErrorHandling("/api/novels/list?lang=".concat(e)),r=await t.json();h(r)}catch(r){console.error("Failed to fetch novels for language:",e,r),h(t),alert(function(e){if(e instanceof ApiError)switch(e.status){case 401:return"認証に失敗しました。再ログインしてください。";case 403:return"この操作を行う権限がありません。";case 404:return"リクエストしたリソースが見つかりませんでした。";case 429:return"リクエストが集中しています。しばらく時間をおいて再試行してください。";case 500:case 502:case 503:return"サーバーエラーが発生しました。しばらく時間をおいて再試行してください。";default:return"エラーが発生しました: ".concat(e.message)}return"エラーが発生しました。時間をおいて再試行してください。"}(r))}finally{N(!1)}},_=u.filter(e=>(!w||!!e.tags.includes(w))&&(!g||e.title.toLowerCase().includes(g.toLowerCase())||e.excerpt.toLowerCase().includes(g.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(g.toLowerCase())))),resetAllFilters=()=>{f(""),b(null)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c(),{children:[(0,s.jsx)("title",{children:"News24 - 最新ニュースと記事"}),(0,s.jsx)("meta",{name:"description",content:"News24が提供する最新ニュースと記事をお楽しみください。"})]}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 text-white py-12 -mt-8 mb-12 animate-fade-in",children:(0,s.jsx)("div",{className:"container-custom",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto text-center",children:[(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"News24"}),(0,s.jsx)("p",{className:"text-xl md:text-2xl opacity-90 mb-8",children:"最新のニュースと記事をお届けします"}),(0,s.jsxs)("div",{className:"relative max-w-lg mx-auto",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(d.Z,{className:"h-5 w-5 text-white opacity-70"})}),(0,s.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"キーワード・タグで検索",className:"w-full py-3 pl-10 pr-12 bg-white/20 backdrop-blur-sm border-white/30 border rounded-full text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50"}),g&&(0,s.jsx)("button",{onClick:()=>{f("")},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white",children:(0,s.jsx)(m.Z,{className:"h-5 w-5"})})]})]})})}),(0,s.jsxs)("main",{className:"container-custom animate-slide-up",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 space-y-4 sm:space-y-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"記事一覧"}),j&&(0,s.jsx)("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-400 animate-pulse-slow",children:"読み込み中..."})]}),(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("button",{onClick:()=>C(!E),className:"inline-flex items-center space-x-2 px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[(0,s.jsx)(x,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"フィルター"}),w&&(0,s.jsx)("span",{className:"inline-flex items-center justify-center w-5 h-5 ml-1 bg-primary-500 text-white text-xs rounded-full",children:"1"})]})})]}),E&&(0,s.jsxs)("div",{className:"mb-8 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 animate-fade-in",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"人気のタグ:"}),(0,s.jsx)(i.Z,{tags:r,size:"sm",className:"mb-2"})]}),w&&(0,s.jsxs)("div",{className:"flex items-center mt-3 bg-gray-50 dark:bg-gray-700/50 rounded-md p-2",children:[(0,s.jsx)("span",{className:"mr-2 text-sm text-gray-600 dark:text-gray-400",children:"選択中のタグ:"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("button",{onClick:()=>b(null),className:"flex items-center bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-400 rounded-full px-3 py-1 text-sm",children:["#",w,(0,s.jsx)(m.Z,{className:"h-4 w-4 ml-1"})]})})]})]}),(0,s.jsxs)("div",{className:"mb-6 text-sm text-gray-600 dark:text-gray-400 flex justify-between items-center",children:[(0,s.jsxs)("span",{children:[_.length," 件の記事"]}),(g||w)&&(0,s.jsx)("button",{onClick:resetAllFilters,className:"text-primary-600 dark:text-primary-400 hover:underline text-sm font-medium",children:"フィルターをクリア"})]}),_.length>0?(0,s.jsx)(n.Z,{novels:_,initialViewMode:v}):(0,s.jsxs)("div",{className:"text-center py-16 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("p",{className:"mt-4 text-gray-500 dark:text-gray-400 mb-2",children:"検索結果がありません"}),(0,s.jsx)("button",{onClick:resetAllFilters,className:"mt-2 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"すべての記事を表示"})]})]})]})}}},function(e){e.O(0,[35,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);