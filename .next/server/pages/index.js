"use strict";(()=>{var e={};e.id=405,e.ids=[405,888,660],e.modules={1420:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>g,default:()=>x,getServerSideProps:()=>h,getStaticPaths:()=>p,getStaticProps:()=>u,reportWebVitals:()=>f,routeModule:()=>k,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>y});var a=r(7093),i=r(5244),n=r(1323),l=r(9209),o=r.n(l),c=r(4807),d=r(1752),m=e([c]);c=(m.then?(await m)():m)[0];let x=(0,n.l)(d,"default"),u=(0,n.l)(d,"getStaticProps"),p=(0,n.l)(d,"getStaticPaths"),h=(0,n.l)(d,"getServerSideProps"),g=(0,n.l)(d,"config"),f=(0,n.l)(d,"reportWebVitals"),y=(0,n.l)(d,"unstable_getStaticProps"),b=(0,n.l)(d,"unstable_getStaticPaths"),w=(0,n.l)(d,"unstable_getStaticParams"),j=(0,n.l)(d,"unstable_getServerProps"),v=(0,n.l)(d,"unstable_getServerSideProps"),k=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:c.default,Document:o()},userland:d});s()}catch(e){s(e)}})},1752:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Home,getStaticProps:()=>getStaticProps});var s=r(997),a=r(6689),i=r(4499),n=r(7353),l=r(4628),o=r(3317),c=r(968),d=r.n(c);let delay=e=>new Promise(t=>setTimeout(t,e));async function withRetry(e,t=3,r=1e3,s=2){try{return await e()}catch(a){if(t<=0)throw a;return console.log(`API呼び出しに失敗しました。${r}ms後にリトライします... (残り ${t} 回)`),await delay(r),withRetry(e,t-1,r*s,s)}}let ApiError=class ApiError extends Error{constructor(e,t,r,s){super(r),this.name="ApiError",this.status=e,this.statusText=t,this.data=s}static async fromResponse(e){let t={},r=e.statusText;try{r=(t=await e.json()).error||t.message||e.statusText}catch(t){try{r=await e.text()}catch(e){}}return new ApiError(e.status,e.statusText,r,t)}};async function fetchWithErrorHandling(e,t={},r=3){return withRetry(async()=>{let r=await fetch(e,t);if(429===r.status){let e=r.headers.get("Retry-After"),t=e?1e3*parseInt(e,10):6e4;throw console.log(`レート制限に達しました。${t}ms後にリトライします...`),await delay(t),new ApiError(429,"Too Many Requests","レート制限に達しました")}if(!r.ok)throw await ApiError.fromResponse(r);return r},r)}var m=r(9633),x=r(1415);let u=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))});async function getStaticProps(){let e=(0,l.LO)(),t=(0,l.Ys)(),r=Object.keys(t);return{props:{novels:e,tags:r,tagCounts:t}}}function Home({novels:e,tags:t,tagCounts:r}){let[l,c]=(0,a.useState)(e),[p,h]=(0,a.useState)(""),[g,f]=(0,a.useState)(o.k$),[y,b]=(0,a.useState)(null),[w,j]=(0,a.useState)(!1),[v,k]=(0,a.useState)("grid"),[N,S]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=(0,o.UO)();f(e),e!==o.k$&&fetchNovelsForLanguage(e)},[]);let fetchNovelsForLanguage=async t=>{j(!0);try{let e=await fetchWithErrorHandling(`/api/novels/list?lang=${t}`),r=await e.json();c(r)}catch(r){console.error("Failed to fetch novels for language:",t,r),c(e),alert(function(e){if(e instanceof ApiError)switch(e.status){case 401:return"認証に失敗しました。再ログインしてください。";case 403:return"この操作を行う権限がありません。";case 404:return"リクエストしたリソースが見つかりませんでした。";case 429:return"リクエストが集中しています。しばらく時間をおいて再試行してください。";case 500:case 502:case 503:return"サーバーエラーが発生しました。しばらく時間をおいて再試行してください。";default:return`エラーが発生しました: ${e.message}`}return"エラーが発生しました。時間をおいて再試行してください。"}(r))}finally{j(!1)}},P=l.filter(e=>(!y||!!e.tags.includes(y))&&(!p||e.title.toLowerCase().includes(p.toLowerCase())||e.excerpt.toLowerCase().includes(p.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(p.toLowerCase())))),resetAllFilters=()=>{h(""),b(null)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d(),{children:[s.jsx("title",{children:"News24 - 最新ニュースと記事"}),s.jsx("meta",{name:"description",content:"News24が提供する最新ニュースと記事をお楽しみください。"})]}),s.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 text-white py-12 -mt-8 mb-12 animate-fade-in",children:s.jsx("div",{className:"container-custom",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto text-center",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"News24"}),s.jsx("p",{className:"text-xl md:text-2xl opacity-90 mb-8",children:"最新のニュースと記事をお届けします"}),(0,s.jsxs)("div",{className:"relative max-w-lg mx-auto",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(m.Z,{className:"h-5 w-5 text-white opacity-70"})}),s.jsx("input",{type:"text",value:p,onChange:e=>h(e.target.value),placeholder:"キーワード・タグで検索",className:"w-full py-3 pl-10 pr-12 bg-white/20 backdrop-blur-sm border-white/30 border rounded-full text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50"}),p&&s.jsx("button",{onClick:()=>{h("")},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white",children:s.jsx(x.Z,{className:"h-5 w-5"})})]})]})})}),(0,s.jsxs)("main",{className:"container-custom animate-slide-up",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 space-y-4 sm:space-y-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"記事一覧"}),w&&s.jsx("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-400 animate-pulse-slow",children:"読み込み中..."})]}),s.jsx("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("button",{onClick:()=>S(!N),className:"inline-flex items-center space-x-2 px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[s.jsx(u,{className:"h-5 w-5"}),s.jsx("span",{children:"フィルター"}),y&&s.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 ml-1 bg-primary-500 text-white text-xs rounded-full",children:"1"})]})})]}),N&&(0,s.jsxs)("div",{className:"mb-8 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 animate-fade-in",children:[(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"人気のタグ:"}),s.jsx(n.Z,{tags:t,size:"sm",className:"mb-2"})]}),y&&(0,s.jsxs)("div",{className:"flex items-center mt-3 bg-gray-50 dark:bg-gray-700/50 rounded-md p-2",children:[s.jsx("span",{className:"mr-2 text-sm text-gray-600 dark:text-gray-400",children:"選択中のタグ:"}),s.jsx("div",{className:"flex-1",children:(0,s.jsxs)("button",{onClick:()=>b(null),className:"flex items-center bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-400 rounded-full px-3 py-1 text-sm",children:["#",y,s.jsx(x.Z,{className:"h-4 w-4 ml-1"})]})})]})]}),(0,s.jsxs)("div",{className:"mb-6 text-sm text-gray-600 dark:text-gray-400 flex justify-between items-center",children:[(0,s.jsxs)("span",{children:[P.length," 件の記事"]}),(p||y)&&s.jsx("button",{onClick:resetAllFilters,className:"text-primary-600 dark:text-primary-400 hover:underline text-sm font-medium",children:"フィルターをクリア"})]}),P.length>0?s.jsx(i.Z,{novels:P,initialViewMode:v}):(0,s.jsxs)("div",{className:"text-center py-16 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-400 mb-2",children:"検索結果がありません"}),s.jsx("button",{onClick:resetAllFilters,className:"mt-2 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"すべての記事を表示"})]})]})]})}},8076:e=>{e.exports=require("gray-matter")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7734:e=>{e.exports=require("use-sync-external-store/with-selector")},1964:e=>{e.exports=import("@floating-ui/react")},8916:e=>{e.exports=import("@react-aria/focus")},7001:e=>{e.exports=import("@react-aria/interactions")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[761,57,209,450,712,725,807,189,499],()=>__webpack_exec__(1420));module.exports=r})();