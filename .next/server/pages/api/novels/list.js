"use strict";(()=>{var e={};e.id=759,e.ids=[759],e.modules={8076:e=>{e.exports=require("gray-matter")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},5878:(e,r,t)=>{t.r(r),t.d(r,{config:()=>y,default:()=>_,routeModule:()=>$});var n={};t.r(n),t.d(n,{default:()=>handler});var a=t(1802),l=t(7153),o=t(6249),s=t(7147),i=t.n(s),u=t(1017),d=t.n(u),c=t(8076),g=t.n(c),p=t(8777);let{DEFAULT_LANGUAGE:f}=p,m=d().join(process.cwd(),"src/content/novels");var v=t(1098);let{DEFAULT_LANGUAGE:h,isValidLang:x}=p;async function handler(e,r){if("GET"!==e.method)return r.status(405).json({error:"Method not allowed"});try{let t=e.query.lang;if(t&&!x(t))throw new v.MS(400,"Bad Request","Invalid language code provided.");t||(t=h);let n=function(e=f){let r=function(){try{let e=i().readdirSync(m);return e.filter(e=>e.endsWith(".md")&&!e.match(/\.[a-z]{2}\.md$/)).map(e=>e.replace(/\.md$/,""))}catch(e){return console.error("Error getting novel slugs:",e),[]}}(),t=r.map(r=>(function getNovelBySlug(e,r=f){try{let t=r===f?`${e}.md`:`${e}.${r}.md`,n=d().join(m,t);if(!i().existsSync(n)){if(r!==f)return getNovelBySlug(e,f);return null}let a=i().readFileSync(n,"utf8"),{data:l,content:o}=g()(a);return{slug:e,title:l.title,date:l.date,tags:l.tags||[],excerpt:l.excerpt||o.slice(0,100),content:o,language:r,translatedFrom:r!==f?f:null,audioUrl:l.audioUrl||null,coverImage:l.coverImage||null,readingTime:l.readingTime||function(e){let r=e.replace(/\s+/g,"").length,t=Math.ceil(r/400);if(t<1)return"1分未満";if(t<60)return`約${t}分`;{let e=Math.floor(t/60),r=t%60;return r>0?`約${e}時間${r}分`:`約${e}時間`}}(o)}}catch(r){return console.error(`Error reading novel ${e}:`,r),null}})(r,e)).filter(e=>null!==e);return t.sort((e,r)=>e.date<r.date?1:-1)}(t);return r.status(200).json(n)}catch(e){if(console.error("API Error getting novels:",e),e instanceof v.MS)return r.status(e.status).json({error:e.message,message:(0,v.po)(e)});return r.status(500).json({error:"Failed to fetch novels",message:(0,v.po)(e)})}}let _=(0,o.l)(n,"default"),y=(0,o.l)(n,"config"),$=new a.PagesAPIRouteModule({definition:{kind:l.x.PAGES_API,page:"/api/novels/list",pathname:"/api/novels/list",bundlePath:"",filename:""},userland:n})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[222,98,777],()=>__webpack_exec__(5878));module.exports=t})();