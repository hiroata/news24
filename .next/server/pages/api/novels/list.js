"use strict";(()=>{var e={};e.id=759,e.ids=[759],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2072:(e,r,t)=>{t.r(r),t.d(r,{config:()=>p,default:()=>v,routeModule:()=>h});var a={};t.r(a),t.d(a,{default:()=>handler});var n=t(1802),l=t(7153),u=t(6249);let o=require("fs");var i=t.n(o);let s=require("path");var d=t.n(s);let c=require("gray-matter");var g=t.n(c);let m={ja:{name:"日本語",nativeName:"日本語",code:"ja",flag:"\uD83C\uDDEF\uD83C\uDDF5",dir:"ltr"},en:{name:"英語",nativeName:"English",code:"en",flag:"\uD83C\uDDFA\uD83C\uDDF8",dir:"ltr"},zh:{name:"中国語",nativeName:"中文",code:"zh",flag:"\uD83C\uDDE8\uD83C\uDDF3",dir:"ltr"},fr:{name:"フランス語",nativeName:"Fran\xe7ais",code:"fr",flag:"\uD83C\uDDEB\uD83C\uDDF7",dir:"ltr"},de:{name:"ドイツ語",nativeName:"Deutsch",code:"de",flag:"\uD83C\uDDE9\uD83C\uDDEA",dir:"ltr"}},D=d().join(process.cwd(),"src/content/novels");var f=t(1098);async function handler(e,r){if("GET"!==e.method)return r.status(405).json({error:"Method not allowed"});try{let t=e.query.lang;if(t&&!(t in m))throw new f.MS(400,"Bad Request","Invalid language code provided.");t||(t="ja");let a=function(e="ja"){let r=function(){try{let e=i().readdirSync(D);return e.filter(e=>e.endsWith(".md")&&!e.match(/\.[a-z]{2}\.md$/)).map(e=>e.replace(/\.md$/,""))}catch(e){return console.error("Error getting novel slugs:",e),[]}}(),t=r.map(r=>(function getNovelBySlug(e,r="ja"){try{let t="ja"===r?`${e}.md`:`${e}.${r}.md`,a=d().join(D,t);if(!i().existsSync(a)){if("ja"!==r)return getNovelBySlug(e,"ja");return null}let n=i().readFileSync(a,"utf8"),{data:l,content:u}=g()(n);return{slug:e,title:l.title,date:l.date,tags:l.tags||[],excerpt:l.excerpt||u.slice(0,100),content:u,language:r,translatedFrom:"ja"!==r?"ja":null,audioUrl:l.audioUrl||null}}catch(r){return console.error(`Error reading novel ${e}:`,r),null}})(r,e)).filter(e=>null!==e);return t.sort((e,r)=>e.date<r.date?1:-1)}(t);return r.status(200).json(a)}catch(e){if(console.error("API Error getting novels:",e),e instanceof f.MS)return r.status(e.status).json({error:e.message,message:(0,f.po)(e)});return r.status(500).json({error:"Failed to fetch novels",message:(0,f.po)(e)})}}let v=(0,u.l)(a,"default"),p=(0,u.l)(a,"config"),h=new n.PagesAPIRouteModule({definition:{kind:l.x.PAGES_API,page:"/api/novels/list",pathname:"/api/novels/list",bundlePath:"",filename:""},userland:a})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[222,98],()=>__webpack_exec__(2072));module.exports=t})();